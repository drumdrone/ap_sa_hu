# Apotheke Sales Hub

Intern√≠ marketingov√° aplikace pro prodejce BIO ƒçaj≈Ø znaƒçky Apotheke. Slou≈æ√≠ jako "Product Hub" s p≈ôehledem produkt≈Ø a marketingov√Ωmi materi√°ly ke ka≈æd√©mu.

## Funkce

### Dashboard (hlavn√≠ str√°nka)
- **Novinky s 3 tabul√°tory** - panel podobn√Ω SEO Tools s p≈ôehledem novinek:
  - **Novinky produkty** - zmƒõny a aktualizace produkt≈Ø (upgrade obr√°zk≈Ø, nov√© fotky apod.) s mo≈ænost√≠ p√°rov√°n√≠ SKU
  - **Novinka firma** - firemn√≠ novinky a ozn√°men√≠
  - **Novinky materi√°ly** - nov√© marketingov√© materi√°ly
  - Jednoduch√° spr√°va (p≈ôid√°v√°n√≠/maz√°n√≠) p≈ô√≠mo z dashboardu
  - Zobrazen√≠ podle data od nejnovƒõj≈°√≠ch
- **Top 20 produkt≈Ø** - prioritn√≠ produkty zobrazen√© na prominentn√≠m m√≠stƒõ s po≈ôad√≠m (p≈ôi nastaven√≠ ƒç√≠sla se ostatn√≠ automaticky posunou)
- **Obchodn√≠ p≈ô√≠le≈æitosti** - kalend√°≈ôn√≠ p≈ô√≠le≈æitosti (Valent√Ωn, V√°noce, Den matek, apod.) s proklikem na detail
- **Dostupn√© materi√°ly** - sekce POSM materi√°l≈Ø s p≈ôid√°n√≠m do Sales Kitu
- **Sales Kit** - plovouc√≠ panel s vybran√Ωmi polo≈ækami, export do TXT/PDF nebo odesl√°n√≠ emailem
- **News Feed** - p≈ôehled posledn√≠ch aktivit (nov√© claimy, soci√°ln√≠ posty, aktualizace)
- **Vyhled√°v√°n√≠ produkt≈Ø** - rychl√© vyhled√°n√≠ podle n√°zvu
- **P≈ôehled plnƒõn√≠** - progress bary pro produkty s claimem a soci√°ln√≠mi s√≠tƒõmi, Tier rozlo≈æen√≠
- **Produkty vy≈æaduj√≠c√≠ pozornost** - seznam produkt≈Ø s chybƒõj√≠c√≠mi daty
- **Posledn√≠ nahran√© obr√°zky** - n√°hled ned√°vno p≈ôidan√Ωch obr√°zk≈Ø ke produkt≈Øm

### Katalog produkt≈Ø (/katalog)
- Grid/List zobrazen√≠ produkt≈Ø jako e-shop
- Vyhled√°v√°n√≠ produkt≈Ø podle n√°zvu
- Filtry: Kategorie z feedu, Podkategorie, Znaƒçka (Brand)
- Produktov√© karty s fotkou, n√°zvem, kategori√≠, cenou a tier badge
- **Sync Feed** tlaƒç√≠tko pro synchronizaci produkt≈Ø z XML feedu

### Detail produktu (/product/[id])
Marketing dashboard pro jednotliv√Ω produkt:

#### Dashboard z√°lo≈æka
- **Hero sekce** - velk√Ω obr√°zek produktu, n√°zev, cena, badges (kategorie, tier, brand pillar)
- **Dostupnost** - stav skladu (Skladem/Vyprod√°no)
- **Odkaz na e-shop** - p≈ô√≠m√Ω link na produkt na apotheke.cz

#### Dostupn√© materi√°ly
Seznam v≈°ech p≈ôipraven√Ωch materi√°l≈Ø k pou≈æit√≠:
- Prodejn√≠ claim s tlaƒç√≠tkem pro kop√≠rov√°n√≠
- Quick Reference Card - strukturovan√° karta s kl√≠ƒçov√Ωmi info
- Facebook/Instagram posty p≈ôipraven√© k publikov√°n√≠
- Obr√°zky v galerii
- PDF produktov√Ω list
- Prodejn√≠ argumenty (Why Buy)

#### Rychl√© akce
- **Upravit data** - inline editace marketingov√Ωch dat
- **Facebook a Instagram images** - nahr√°n√≠ obr√°zk≈Ø pro soci√°ln√≠ s√≠tƒõ z URL
- **Historie propagace** - p≈ôehled p≈ôedchoz√≠ch kampan√≠

#### Pro prodejce
- **To-do list** - marketingov√© √∫koly k vyplnƒõn√≠
- **Product Sales Kit** - mo≈ænost p≈ôid√°vat materi√°ly a exportovat

#### Dal≈°√≠ sekce (z√°lo≈æky v menu)
- **Data z e-shopu** - automaticky synchronizovan√° data (n√°zev, popis, cena, obr√°zek, dostupnost)
- **Marketing** - prodejn√≠ claim, subtitle, proƒç koupit, c√≠lov√° skupina, FAQ
- **Soci√°ln√≠ s√≠tƒõ** - p≈ô√≠klady post≈Ø pro Facebook a Instagram s copy-paste tlaƒç√≠tky, hashtagy
- **Galerie** - obr√°zky a materi√°ly specifick√© pro dan√Ω produkt s mo≈ænost√≠ uploadu a tagov√°n√≠
- **Materi√°ly** - PDF produktov√Ω list, bannery v r≈Øzn√Ωch rozmƒõrech, reference card
- **Editovat** - kompletn√≠ formul√°≈ô pro √∫pravu v≈°ech marketingov√Ωch dat

#### Roz≈°√≠≈ôen√© marketingov√© √∫daje
- **Quick Reference Card** - strukturovan√° ASCII karta s kl√≠ƒçov√Ωmi informacemi
- **FAQ** - ƒçasto kladen√© ot√°zky a odpovƒõdi
- **Prodejn√≠ progn√≥za** - ASCII graf prodejn√≠ho potenci√°lu
- **Senzorick√Ω profil** - ASCII zobrazen√≠ chu≈•ov√©ho profilu
- **Sez√≥nn√≠ p≈ô√≠le≈æitosti** - tabulka vhodn√Ωch obdob√≠ pro prodej
- **Hlavn√≠ benefity** - 3 kl√≠ƒçov√© v√Ωhody produktu
- **Slo≈æen√≠ bylin** - grafick√© zobrazen√≠ slo≈æen√≠
- **Srovn√°n√≠ s konkurenc√≠** - ASCII srovn√°vac√≠ tabulka Apotheke vs. konkurence
- **Souvisej√≠c√≠ ƒçl√°nky** - odkazy na blogy a ƒçl√°nky

### Galerie produktu
Ka≈æd√Ω produkt m√° vlastn√≠ galerii obr√°zk≈Ø:
- Upload obr√°zk≈Ø do Convex storage
- Tagov√°n√≠ obr√°zk≈Ø p≈ôi uploadu
- Filtrov√°n√≠ podle tag≈Ø
- Maz√°n√≠ obr√°zk≈Ø
- Grid zobrazen√≠ s n√°hledem
- Inline upload z detailu produktu

### POSM Materi√°ly (/posm)
Katalog prodejn√≠ch materi√°l≈Ø s mo≈ænost√≠ objedn√°v√°n√≠:
- **Katalog** - p≈ôehled v≈°ech dostupn√Ωch POSM materi√°l≈Ø (let√°ky, stojany, plak√°ty, woblery, display, cenovky)
- **Spr√°va** - p≈ôid√°v√°n√≠, editace a maz√°n√≠ materi√°l≈Ø
- **Drag & Drop upload** - p≈ôeta≈æen√≠ PDF/obr√°zk≈Ø p≈ôi p≈ôid√°v√°n√≠ materi√°lu
- **Objedn√°vky** - formul√°≈ô pro objedn√°n√≠ materi√°l≈Ø s kontaktn√≠mi √∫daji
- **Stavy objedn√°vek** - nov√°, zpracov√°v√° se, odesl√°no, doruƒçeno, zru≈°eno
- **Statistiky** - p≈ôehled aktivn√≠ch materi√°l≈Ø a objedn√°vek

### Obchodn√≠ p≈ô√≠le≈æitosti (/prilezitost/[slug])
Detail sez√≥nn√≠/kalend√°≈ôn√≠ p≈ô√≠le≈æitosti:
- **Hero sekce** - n√°zev p≈ô√≠le≈æitosti, datum, popis
- **Tip pro prodejce** - rychl√° rada jak vyu≈æ√≠t p≈ô√≠le≈æitost
- **P≈ôi≈ôazen√© produkty** - seznam produkt≈Ø vhodn√Ωch pro danou akci
- **Pokyny k akci** - podrobn√© instrukce
- **Online bannery** - odkazy na digit√°ln√≠ materi√°ly
- **Tiskov√© let√°ky** - odkazy na tiskov√© materi√°ly
- **Event Sales Kit** - export materi√°l≈Ø do TXT/PDF nebo email

#### Dostupn√© materi√°ly
- Tlaƒç√≠tko "Cel√Ω bal√≠ƒçek" - p≈ôid√° v≈°echny materi√°ly do Event Kit najednou
- Jednotliv√© materi√°ly s tlaƒç√≠tky pro kop√≠rov√°n√≠ a p≈ôid√°n√≠ do kitu
- Rozbalen√Ω seznam v≈°ech dostupn√Ωch polo≈æek (bez scroll limitu)

### Sales Kit / Event Kit
Funkce pro sbƒõr a export materi√°l≈Ø:
- **P≈ôid√°v√°n√≠ polo≈æek** - tlaƒç√≠tko "+" u ka≈æd√©ho materi√°lu
- **Export do TXT** - textov√Ω soubor s form√°tov√°n√≠m
- **Export do PDF** - tisknuteln√Ω dokument s layoutem
- **Odesl√°n√≠ emailem** - p≈ô√≠m√© odesl√°n√≠ na zadan√Ω email
- **Plovouc√≠ panel** - viditeln√Ω p≈ôehled vybran√Ωch polo≈æek

## Upozornƒõn√≠ (Alerts)
Syst√©m automatick√Ωch upozornƒõn√≠ v detailu produktu:
- **Nov√Ω obsah** (zelen√©) - nap≈ô. novƒõ p≈ôidan√Ω claim nebo soci√°ln√≠ post k pou≈æit√≠
- **Urgentn√≠** (ƒçerven√©) - chybƒõj√≠c√≠ povinn√° data (claim, soci√°ln√≠ posty)
- **Tipy** (≈ælut√©) - doporuƒçen√≠ ke zlep≈°en√≠ (nastaven√≠ tieru, brand pillar)

## Synchronizace XML feedu

Aplikace podporuje import produkt≈Ø z Google Shopping XML feedu:
- Feed URL: `https://www.apotheke.cz/xml-feed/google.xml`
- Tlaƒç√≠tko "Sync Feed" v headeru spust√≠ synchronizaci **v≈°ech produkt≈Ø** (864+)
- P≈ôi synchronizaci se aktualizuj√≠ pouze data z feedu (n√°zev, popis, cena, obr√°zek)
- Marketingov√° data (prodejn√≠ claim, tier, brand pillar, soci√°ln√≠ s√≠tƒõ) z≈Øst√°vaj√≠ zachov√°na

### Automatick√© mapov√°n√≠ kategori√≠
P≈ôi prvn√≠m importu produktu se automaticky nastav√≠ kategorie podle `productType` z feedu:
- **BIO** - produkty obsahuj√≠c√≠ "bio" v n√°zvu kategorie
- **Dƒõtsk√Ω** - produkty z kategorie "Pro dƒõti"
- **Funkƒçn√≠** - vitam√≠ny, dopl≈àky stravy, fitness produkty
- **Bylinn√Ω** - ƒçaje, bylinky, sypan√© smƒõsi

### Dvƒõ vrstvy dat
1. **Data z feedu** (automaticky aktualizovan√°):
   - externalId, name, description, image, price
   - productUrl, availability, brand, gtin, productType

2. **Marketingov√° data** (ruƒçnƒõ p≈ôidan√°/editovateln√°):
   - category, salesClaim, salesClaimSubtitle
   - whyBuy, targetAudience
   - pdfUrl, bannerUrls
   - socialFacebook, socialInstagram, hashtags
   - socialFacebookImage, socialInstagramImage (obr√°zky pro soci√°ln√≠ s√≠tƒõ z URL)
   - brandPillar, tier
   - quickReferenceCard, faq, faqText
   - salesForecast, sensoryProfile, seasonalOpportunities
   - mainBenefits, herbComposition, competitionComparison, articleUrls
   - marketingLastUpdated, lastUpdatedField (pro sledov√°n√≠ zmƒõn)

## Datab√°ze (Convex)

### Tabulky
- `products` - v≈°echna data o produktech
- `gallery` - obr√°zky propojen√© s produkty p≈ôes `productId`
- `posmItems` - katalog POSM materi√°l≈Ø
- `posmOrders` - objedn√°vky POSM materi√°l≈Ø
- `opportunities` - obchodn√≠ p≈ô√≠le≈æitosti (sez√≥nn√≠ akce)
- `promotionLogs` - historie propagace produkt≈Ø
- `news` - novinky/log z√°znamy (produkty, firma, materi√°ly) s mo≈ænost√≠ SKU p√°rov√°n√≠
- `marketingBackup` - z√°loha marketingov√Ωch dat podle SKU (automaticky p≈ôi maz√°n√≠ produkt≈Ø)
- `galleryBackup` - z√°loha obr√°zk≈Ø z galerie podle SKU

### Indexy
- `products.by_externalId` - rychl√© p√°rov√°n√≠ p≈ôi synchronizaci
- `products.by_isTop` - Top 10 produkty
- `products.search_name` - fulltext vyhled√°v√°n√≠ podle n√°zvu
- `gallery.by_product` - obr√°zky podle produktu
- `gallery.by_uploadedAt` - nejnovƒõj≈°√≠ obr√°zky pro news feed
- `opportunities.by_slug` - rychl√© vyhled√°n√≠ p≈ô√≠le≈æitosti
- `promotionLogs.by_product` - historie propagace produktu
- `news.by_type` - filtrov√°n√≠ novinek podle typu
- `news.by_createdAt` - ≈ôazen√≠ podle data

## Design

- Prim√°rn√≠ zelen√°: #2D5A27
- Sekund√°rn√≠: #8BC34A
- Pozad√≠: #F5F5F0
- Font: Inter
- Zaoblen√© rohy, jemn√© st√≠ny
- Responzivn√≠ design

## Kategorie barev
- Bylinn√Ω = zelen√°
- Funkƒçn√≠ = modr√°
- Dƒõtsk√Ω = r≈Ø≈æov√°
- BIO = ≈ælut√°

## Brand Pillars
- Vƒõda (üî¨)
- BIO (üåø)
- Funkce (‚ö°)
- Tradice (üèõÔ∏è)
- Rodina (üë®‚Äçüë©‚Äçüëß‚Äçüë¶)

## Tier syst√©m
- **A** - nejvy≈°≈°√≠ priorita, kl√≠ƒçov√© produkty
- **B** - st≈ôedn√≠ priorita
- **C** - n√≠zk√° priorita

## API Endpoints

- `POST /api/sync-feed` - Spust√≠ synchronizaci XML feedu
  - Body: `{ "limit": 100 }` (voliteln√©, bez limitu naƒçte v≈°echny produkty)
  - Response: `{ "success": true, "created": X, "updated": Y }`

- `POST /api/ai-suggest` - AI n√°vrhy pro marketingov√° data
  - Body: `{ "prompt": "...", "productName": "..." }`
  - Response: AI generovan√Ω obsah

## Technologie

- **Frontend:** Next.js 16, React, TypeScript
- **Styling:** Tailwind CSS, shadcn/ui komponenty
- **Backend:** Convex (datab√°ze, real-time sync, file storage)
- **Autentizace:** Convex Auth s OTP (Resend)
- **Emailing:** Resend pro odes√≠l√°n√≠ Sales Kit≈Ø

## Instalace a spu≈°tƒõn√≠

### 1. Klonov√°n√≠ repozit√°≈ôe
```bash
git clone https://github.com/YOUR_USERNAME/apotheke-sales-hub.git
cd apotheke-sales-hub
npm install
```

### 2. Nastaven√≠ Convex
```bash
npx convex dev
```
P≈ôi prvn√≠m spu≈°tƒõn√≠ se vytvo≈ô√≠ nov√Ω Convex projekt.

### 3. Environment variables
Vytvo≈ôte `.env.local` s tƒõmito promƒõnn√Ωmi:
```
CONVEX_DEPLOYMENT=your-deployment-name
NEXT_PUBLIC_CONVEX_URL=https://your-deployment.convex.cloud
```

### 4. Import datab√°ze (voliteln√©)
Data z datab√°ze jsou exportov√°na v `convex/seed/`. Import:
```bash
npx convex import --table products convex/seed/products/documents.jsonl
npx convex import --table feedTaxonomy convex/seed/feedTaxonomy/documents.jsonl
npx convex import --table opportunities convex/seed/opportunities/documents.jsonl
npx convex import --table news convex/seed/news/documents.jsonl
npx convex import --table posmItems convex/seed/posmItems/documents.jsonl
npx convex import --table marketingBackup convex/seed/marketingBackup/documents.jsonl
```

### 5. Spu≈°tƒõn√≠
```bash
npm run dev
```
Aplikace bƒõ≈æ√≠ na `http://localhost:3000`

## Struktura exportovan√Ωch dat

```
convex/seed/
‚îú‚îÄ‚îÄ products/          # 992 produkt≈Ø s marketingov√Ωmi daty
‚îú‚îÄ‚îÄ feedTaxonomy/      # 7 kategori√≠ z feedu
‚îú‚îÄ‚îÄ opportunities/     # 6 obchodn√≠ch p≈ô√≠le≈æitost√≠
‚îú‚îÄ‚îÄ news/             # 4 novinky
‚îú‚îÄ‚îÄ posmItems/        # POSM materi√°ly
‚îú‚îÄ‚îÄ marketingBackup/  # 27 z√°loh marketingov√Ωch dat
‚îú‚îÄ‚îÄ gallery/          # 5 obr√°zk≈Ø (vy≈æaduje Convex storage)
‚îî‚îÄ‚îÄ import.ts         # Dokumentace k importu
```

**Pozn√°mka:** Auth tabulky (users, sessions) nejsou zahrnuty z bezpeƒçnostn√≠ch d≈Øvod≈Ø. Gallery obr√°zky vy≈æaduj√≠ manu√°ln√≠ nahr√°n√≠ do Convex storage.

## Ned√°vn√© zmƒõny

### Z√°lohovac√≠ syst√©m pro marketingov√° data (√∫nor 2026)
P≈ôi smaz√°n√≠ produkt≈Ø (nap≈ô. p≈ôi ƒçi≈°tƒõn√≠ oproti feedu) se automaticky z√°lohuj√≠:
- **Marketingov√° data** - salesClaim, tier, brandPillar, soci√°ln√≠ s√≠tƒõ, FAQ, a dal≈°√≠
- **Obr√°zky z galerie** - storage soubory z≈Øst√°vaj√≠ v Convex, pouze se p≈ôesunou do z√°lohy

Kdy≈æ se produkt p≈ôi dal≈°√≠m importu feedu znovu objev√≠ (podle SKU), data se **automaticky obnov√≠**.

Nov√© tabulky v datab√°zi:
- `marketingBackup` - z√°loha marketingov√Ωch dat podle SKU
- `galleryBackup` - z√°loha obr√°zk≈Ø podle SKU

Admin str√°nka `/admin/feed` zobrazuje statistiky z√°loh.

### Novinky panel s 3 tabul√°tory (leden 2026)
- Nov√Ω panel "Novinky" na hlavn√≠ str√°nce ve stylu SEO Tools
- 3 kategorie: Novinky produkty, Novinka firma, Novinky materi√°ly
- Jednoduch√° spr√°va - p≈ôid√°v√°n√≠ a maz√°n√≠ z√°znam≈Ø
- Mo≈ænost p√°rov√°n√≠ SKU k produkt≈Øm v datab√°zi (nap≈ô. p≈ôi upgrade obr√°zk≈Ø)
- Zobrazen√≠ podle data od nejnovƒõj≈°√≠ch
- Odstranƒõny statistick√© karty z dashboardu

### Facebook a Instagram obr√°zky
- Mo≈ænost nahr√°t obr√°zky pro soci√°ln√≠ s√≠tƒõ p≈ô√≠mo z URL
- Nov√° pole `socialFacebookImage` a `socialInstagramImage` v produktech
- Rychl√° akce "Facebook a Instagram images" v detailu produktu

### Event Kit vylep≈°en√≠
- Tlaƒç√≠tko "Cel√Ω bal√≠ƒçek" pro p≈ôid√°n√≠ v≈°ech materi√°l≈Ø najednou
- Rozbalen√Ω seznam dostupn√Ωch materi√°l≈Ø (bez scroll limitu)
- Lep≈°√≠ organizace materi√°l≈Ø v p≈ô√≠le≈æitostech
